#!/bin/bash

# set get GCP environment variables
export GCP_PROJECT_ID=hubert-training-refactoring # TODO rename or even substitue
export GCP_DNS_ZONE=$GCP_PROJECT_ID
export GCP_MAIL=$GCP_PROJECT_ID@cloud-native.training
export GCP_SA_NAME=kkp-admin-training
export GCP_SA_MAIL=$GCP_SA_NAME@$GCP_PROJECT_ID.iam.gserviceaccount.com
export GCP_DOMAIN=$GCP_PROJECT_ID.cloud-native.training
export GCP_REPO_URL=gcr.io/$GCP_PROJECT_ID

# set K1 && KKP versions
export KUBEONE_VERSION=1.8.2
export KUBEONE_VERSION_NEW=1.8.3
export KKP_VERSION=2.25.11
export KKP_VERSION_NEW=2.26.0

# add bin directory to PATH
export PATH=$PATH:~/bin

# add ssh-key
eval `ssh-agent`
ssh-add ~/secrets/kkp_admin_training

# install needed tools
sudo apt-get install -y uuid-runtime apache2-utils
sudo wget -qO ~/bin/yq https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64
sudo chmod a+x ~/bin/yq

# set the Google Credentials file 
export GOOGLE_CREDENTIALS=$(cat ~/secrets/key.json)
